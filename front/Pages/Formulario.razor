@page "/formulario"

@using Services;
@using Microsoft.AspNetCore.Components.Server.ProtectedBrowserStorage

@inject UserService service
@inject NavigationManager nav
@inject ProtectedSessionStorage storage

<div class="text-left">
    <div class="py-5 text-center">
        <img class="d-block mx-auto mb-4" src="img/curitibandoLogoPreto.png" alt="" width="282" height="200">
        <h2>Registre sua viagem</h2>
        <p class="lead">Preencha o formulário e enriqueça esse site para que os próximos visitantes possam aproveitar suas dicas e recomendações.</p>
    </div> 

   <div class="form-group">
        <label>Data de Chegada:</label>
        <input type="date" @bind-value="@ArrivalDate" placeholder="00/00/0000"></input>
    </div>
    <div class="form-group">
        <label>Data de Retorno: </label>
        <input type="date" @bind-value="@DepartureDate" placeholder="00/00/0000"></input>
    </div>
           
    
    <h4 class="mb-3">Hospedagem</h4>
        
    <div class="col-sm-6">
        <label for="TipoHospedagem" class="form-label">Tipo de hospedagem</label>
        <input type="text" @bind-value="@TypeHosting" class="form-control" id="TipoHospedagem" placeholder="Digite tipo de hospedagem utilizada">   
    </div>
    
    <div class="col-sm-6">
        <label for="valorGasto" class="form-label">Valor gasto em R$:</label>
        <input type="text" @bind-value="@HostingAmount" class="form-control" id="valorGasto" placeholder="Digite o valor gasto em sua estadia.">   
    </div>

    <div class="col-sm-6">
        <label for="nomeLocal" class="form-label">Nome do estabelecimento:</label>
        <input type="text" @bind-value="@Accommodation" class="form-control" id="nomeLocal" placeholder="Digite o nome do local de hospedagem.">
    </div>

    <div class="col-sm-6">
        <label for="linkContato" class="form-label">Link para contato:</label>
        <input type="text" @bind-value="@Link" class="form-control" id="linkContato" placeholder="Adicione o link para contato com o local de hospedagem.">      
    </div>

    <div class="col-12">
        <label for="relatoAlim" class="form-label">Conte-nos sua experiência/curiosidades/dicas:</label>
        <input type="text" @bind-value="@HostingComments" class="form-control" id="comments" rows="3">
    </div>
            

    <h4 class="mt-3 mb-3">Alimentação</h4>
    
    <div class="col-sm-6">
        <label for="TipoEstabelecimento" class="form-label">Tipo de estabelecimento:</label>
        <input type="text" @bind-value="@TypeFood" class="form-control" id="TipoEstabelecimento" placeholder="Informe se é um restaurante, padaria, etc...">   
    </div>
   
    <div class="col-sm-6">
        <label for="valorGastoAlim" class="form-label">Valor gasto em R$:</label>
        <input type="text" @bind-value="@FoodAmount" class="form-control" id="valorGastoAlim" placeholder="Digite o valor gasto no estabelecimento.">   
    </div>

    <div class="col-sm-6">
        <label for="tipodecomida" class="form-label">Tipo de comida consumida:</label>
        <input type="text" @bind-value="@TypeFood" class="form-control" id="nomeLocal" placeholder="Digite o tipo de comida consumida.">
    </div>

    <div class="col-sm-6">
        <label for="nomeLocal" class="form-label">Nome do estabelecimento:</label>
        <input type="text" @bind-value="@FoodPlaceName" class="form-control" id="nomeLocal" placeholder="Digite o nome do estabelecimento.">
    </div>

    <div class="col-sm-6">
        <label for="linkContato" class="form-label">Link para contato:</label>
        <input type="text" @bind-value="@LinkFood" class="form-control" id="linkContato" placeholder="Adicione o link para contato com o estabelecimento.">         
    </div>

    <div class="col-12">
        <label for="relatoAlim" class="form-label">Conte-nos sua experiência/curiosidades/dicas:</label>
        <input type="text" @bind-value="@FoodComments" class="form-control" id="comments" rows="3">    
    </div>


    <h4 class="mt-3 mb-3">Pontos Turísticos</h4>
        
    <div class="col-sm-6">
        <label for="TipoAtracao" class="form-label">Tipo de atração:</label>
        <input type="text" @bind-value="@TypeAttraction" class="form-control" id="TipoAtracao" placeholder="Informe local visitado: museu, parque, etc...">   
    </div>                  
      
    <div class="col-sm-6">
        <label for="valorGastoTur" class="form-label">Valor gasto em R$:</label>
        <input type="text" @bind-value="@AttractionAmount" class="form-control" id="valorGasto" placeholder="Digite o valor gasto com passeios ou entradas.">   
    </div>

    <div class="col-sm-6">
        <label for="tipoTranporte" class="form-label">Tipo de transporte:</label>
        <input type="text" @bind-value="@TypeTransport" class="form-control" id="TipoTransporte" placeholder="Digite o meio de transporte utilizado: carro, ônibus, etc.">
    </div>

    <div class="col-12">
        <label for="relatoTur" class="form-label">Conte-nos sua experiência/curiosidades/dicas:</label>
        <input type="text" @bind-value="@AttractionComments" class="form-control" id="comments" rows="3">
    </div>

    <button onclick="@createFormulario">
        Salvar
    </button> 

</div>


@code
{
    private DateTime ArrivalDate;
    private DateTime DepartureDate;
    private string TypeHosting;
    private string HostingAmount;
    private string Accommodation;
    private string Link;
    private string HostingComments;
    private string Food;
    private string FoodAmount;
    private string TypeFood;
    private string FoodPlaceName;
    private string LinkFood;
    private string FoodComments;
    private string TypeAttraction;
    private string AttractionAmount;
    private string TypeTransport;
    private string AttractionComments;
    
    public async void createFormulario()
    {    
        await service.Formulario(            
            this.ArrivalDate,
            this.DepartureDate,            
            this.TypeHosting,
            this.HostingAmount,
            this.Accommodation,
            this.Link,
            this.HostingComments,
            this.Food,
            this.FoodAmount,
            this.TypeFood,
            this.FoodPlaceName,
            this.LinkFood,
            this.FoodComments,
            this.TypeAttraction,
            this.AttractionAmount,
            this.TypeTransport,
            this.AttractionComments);

        this.ArrivalDate= DateTime.Now;
        this.DepartureDate= DateTime.Now;
        this.TypeHosting = "";
        this.HostingAmount = "";
        this.Accommodation = "";
        this.Link = "";
        this.HostingComments = "";
        this.Food = "";
        this.FoodAmount = "";
        this.TypeFood = "";
        this.FoodPlaceName = "";
        this.LinkFood = "";
        this.FoodComments ="";
        this.TypeAttraction = "";
        this.AttractionAmount = "";
        this.TypeTransport = "";
        this.AttractionComments= "";
               
        this.StateHasChanged();

        nav.NavigateTo("/");
    }
}